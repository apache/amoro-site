




























<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Trino</title>

    
    















<link href="../css/bootstrap.css" rel="stylesheet">


<link href="../css/markdown.css" rel="stylesheet">
<link href="../css/katex.min.css" rel="stylesheet">





<link href="../css/amoro-theme.css" rel="stylesheet">


<link href="../font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">


<link href="../css/termynal.css" rel="stylesheet">

<link href="../css/home-page.css" rel="stylesheet">


    
    
    

</head>
<body>

<head>
    <script>
        
        function addAnchor(element) {
            element.insertAdjacentHTML('beforeend', `<a href="#${element.id}" class="anchortag" ariaLabel="Anchor"> ðŸ”— </a>` )
        }
        document.addEventListener('DOMContentLoaded', function () {
            var headers = document.querySelectorAll('h1[id], h2[id], h3[id], h4[id]')
            if (headers) {
                headers.forEach(addAnchor)
            }
        });
    </script>
</head>















    <nav class="navbar navbar-default" role="navigation">
        <topsection>
            <div class="navbar-fixed-top">
                <div>
                <a class="page-scroll navbar-brand" href="https://amoro.apache.org/"><img class="top-navbar-logo" src="https://amoro.apache.org/docs/version_bump_when_releasing//img/amoro-logo-icon.png"/></a>
                </div>
            </div>
            <div class="navbar-menu-fixed-top navbar-pages-group">
                
                
                
                
                
                    <div class="topnav-page-selection">
                        <a   href="https://amoro.apache.org/docs/version_bump_when_releasing/../../quick-start/">Quickstart</a>
                    </div class="topnav-page-selection">
                
                
                
                
                    
                    <div class="versions-dropdown">
                    <div class="topnav-page-selection">
                        <a   href="">Docs</a> <i class="fa fa-caret-down"></i>
                    </div class="topnav-page-selection">
                        <div class="versions-dropdown-content">
                        <ul>
                        
                            <li class="topnav-page-selection">
                            <a   href="https://amoro.apache.org/docs/version_bump_when_releasing/../../docs/latest/">latest</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="https://amoro.apache.org/docs/version_bump_when_releasing/../../docs/0.8.1/">0.8.1-incubating</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="https://amoro.apache.org/docs/version_bump_when_releasing/../../docs/0.8.0/">0.8.0-incubating</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="https://amoro.apache.org/docs/version_bump_when_releasing/../../docs/0.7.1/">0.7.1-incubating</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="https://amoro.apache.org/docs/version_bump_when_releasing/../../docs/0.7.0/">0.7.0-incubating</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="https://amoro.apache.org/docs/version_bump_when_releasing/../../docs/0.6.1/">0.6.1</a>
                            </li class="topnav-page-selection">
                        
                        </ul>
                        </div>
                    </div>
                
                
                
                
                    
                    <div class="versions-dropdown">
                    <div class="topnav-page-selection">
                        <a   href="">Benchmark</a> <i class="fa fa-caret-down"></i>
                    </div class="topnav-page-selection">
                        <div class="versions-dropdown-content">
                        <ul>
                        
                            <li class="topnav-page-selection">
                            <a   href="https://amoro.apache.org/docs/version_bump_when_releasing/../../benchmark-report/">Benchmark Report</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="https://amoro.apache.org/docs/version_bump_when_releasing/../../benchmark-guide/">Benchmark Guide</a>
                            </li class="topnav-page-selection">
                        
                        </ul>
                        </div>
                    </div>
                
                
                
                
                    <div class="topnav-page-selection">
                        <a   href="https://amoro.apache.org/docs/version_bump_when_releasing/../../download/">Download</a>
                    </div class="topnav-page-selection">
                
                
                
                
                    <div class="topnav-page-selection">
                        <a   href="https://amoro.apache.org/docs/version_bump_when_releasing/../../roadmap/">Roadmap</a>
                    </div class="topnav-page-selection">
                
                
                
                
                    
                    <div class="versions-dropdown">
                    <div class="topnav-page-selection">
                        <a   href="">Community</a> <i class="fa fa-caret-down"></i>
                    </div class="topnav-page-selection">
                        <div class="versions-dropdown-content">
                        <ul>
                        
                            <li class="topnav-page-selection">
                            <a   href="https://amoro.apache.org/docs/version_bump_when_releasing/../../join-community/">Join Community</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a   href="https://amoro.apache.org/docs/version_bump_when_releasing/../../how-to-contribute/">How to contribute</a>
                            </li class="topnav-page-selection">
                        
                        </ul>
                        </div>
                    </div>
                
                
                
                
                    
                    <div class="versions-dropdown">
                    <div class="topnav-page-selection">
                        <a   href="">ASF</a> <i class="fa fa-caret-down"></i>
                    </div class="topnav-page-selection">
                        <div class="versions-dropdown-content">
                        <ul>
                        
                            <li class="topnav-page-selection">
                            <a  target="_blank" href="https://www.apache.org/">Foundation</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a  target="_blank" href="https://www.apache.org/licenses/">License</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a  target="_blank" href="https://www.apache.org/foundation/sponsorship.html">Donate</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a  target="_blank" href="https://www.apache.org/foundation/thanks.html">Sponsors</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a  target="_blank" href="https://www.apache.org/security/">Security</a>
                            </li class="topnav-page-selection">
                        
                            <li class="topnav-page-selection">
                            <a  target="_blank" href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy</a>
                            </li class="topnav-page-selection">
                        
                        </ul>
                        </div>
                    </div>
                
                
                <div class="topnav-page-selection">
                    <a href="https://github.com/apache/incubator-amoro" target="_blank">
                        <img src="https://amoro.apache.org/docs/version_bump_when_releasing//img/GitHub-Mark.png" target="_blank" class="top-navbar-logo"/>
                    </a>
                </div>
            </div>
            </topsection>
    </nav>

<body dir=" ltr">
    <section>
        <div class="grid-container leftnav-and-toc">
            
                














<div class="sidebar markdown-body">
    <div id="sidebar-full">
        














  <div>
        <input type="search" class="form-control" id="search-input" placeholder="Search docs..." maxlength="64" data-hotkeys="s/">
  </div>


        













<section>
    <div id="search-results-container">
        <ul id="search-results"></ul>
    </div>
</section>
    <div class="sidebar-menu">
    <ul>
        

        
        
        
            
                <li>
                    <a class="top-menu" id=""  href="../">
                        <span>Introduction</span>
                    </a>
                </li>
            
        
        
        
            
                <li>


                    <a class="top-menu chevron-toggle  collapsed" data-toggle="collapse" href="#Concepts">
                        <span>Concepts</span>
                    </a>
                </li>
        <div id="Concepts" class="collapse in">
                <ul class="sub-menu">
                    
                        <li>
                            <a href="../catalogs/">Catalogs</a>
                        </li>
                    
                        <li>
                            <a href="../self-optimizing/">Self-Optimizing</a>
                        </li>
                    
                        <li>
                            <a href="../table-watermark/">Table Watermark</a>
                        </li>
                    
                </ul>
        </div>
            
        
        
        
            
                <li>


                    <a class="top-menu chevron-toggle  collapsed" data-toggle="collapse" href="#Admin_Guides">
                        <span>Admin Guides</span>
                    </a>
                </li>
        <div id="Admin_Guides" class="collapse in">
                <ul class="sub-menu">
                    
                        <li>
                            <a href="../deployment/">Deployment</a>
                        </li>
                    
                        <li>
                            <a href="../deployment-on-kubernetes/">Deployment On Kubernetes</a>
                        </li>
                    
                        <li>
                            <a href="../managing-catalogs/">Managing Catalogs</a>
                        </li>
                    
                        <li>
                            <a href="../managing-optimizers/">Managing Optimizers</a>
                        </li>
                    
                        <li>
                            <a href="../using-customized-encryption-method/">Using Customized Encryption Method for Configurations</a>
                        </li>
                    
                        <li>
                            <a href="../using-kyuubi/">Using Kyuubi By Terminal</a>
                        </li>
                    
                </ul>
        </div>
            
        
        
        
            
                <li>


                    <a class="top-menu chevron-toggle  collapsed" data-toggle="collapse" href="#User_Guides">
                        <span>User Guides</span>
                    </a>
                </li>
        <div id="User_Guides" class="collapse in">
                <ul class="sub-menu">
                    
                        <li>
                            <a href="../using-tables/">Using Tables</a>
                        </li>
                    
                        <li>
                            <a href="../configurations/">Configurations</a>
                        </li>
                    
                        <li>
                            <a href="../cdc-ingestion/">CDC Ingestion</a>
                        </li>
                    
                        <li>
                            <a href="../metrics/">Metrics</a>
                        </li>
                    
                </ul>
        </div>
            
        
        
        
            
                <li>


                    <a class="top-menu chevron-toggle  collapsed" data-toggle="collapse" href="#Formats">
                        <span>Formats</span>
                    </a>
                </li>
        <div id="Formats" class="collapse in">
                <ul class="sub-menu">
                    
                        <li>
                            <a href="../formats-overview/">Overview</a>
                        </li>
                    
                        <li>
                            <a href="../iceberg-format/">Iceberg</a>
                        </li>
                    
                        <li>
                            <a href="../paimon-format/">Paimon</a>
                        </li>
                    
                        <li>
                            <a href="../mixed-iceberg-format/">Mixed-Iceberg</a>
                        </li>
                    
                        <li>
                            <a href="../mixed-hive-format/">Mixed-Hive</a>
                        </li>
                    
                </ul>
        </div>
            
        
        
        
            
                <li>


                    <a class="top-menu chevron-toggle  collapsed" data-toggle="collapse" href="#Flink">
                        <span>Flink</span>
                    </a>
                </li>
        <div id="Flink" class="collapse in">
                <ul class="sub-menu">
                    
                        <li>
                            <a href="../flink-getting-started/">Flink Getting Started</a>
                        </li>
                    
                        <li>
                            <a href="../flink-ddl/">Flink DDL</a>
                        </li>
                    
                        <li>
                            <a href="../flink-dml/">Flink DML</a>
                        </li>
                    
                        <li>
                            <a href="../flink-cdc-ingestion/">Flink CDC Ingestion</a>
                        </li>
                    
                        <li>
                            <a href="../flink-datastream/">Flink DataStream</a>
                        </li>
                    
                        <li>
                            <a href="../flink-using-logstore/">Using Logstore</a>
                        </li>
                    
                </ul>
        </div>
            
        
        
        
            
                <li>


                    <a class="top-menu chevron-toggle  collapsed" data-toggle="collapse" href="#Spark">
                        <span>Spark</span>
                    </a>
                </li>
        <div id="Spark" class="collapse in">
                <ul class="sub-menu">
                    
                        <li>
                            <a href="../spark-getting-started/">Spark Getting Started</a>
                        </li>
                    
                        <li>
                            <a href="../spark-configuration/">Spark Configuration</a>
                        </li>
                    
                        <li>
                            <a href="../spark-ddl/">Spark DDL</a>
                        </li>
                    
                        <li>
                            <a href="../spark-queries/">Spark Queries</a>
                        </li>
                    
                        <li>
                            <a href="../spark-writes/">Spark Writes</a>
                        </li>
                    
                </ul>
        </div>
            
        
        
        
            
                <li>
                    <a class="top-menu" id="active"  href="../trino/">
                        <span>Trino</span>
                    </a>
                </li>
            
        
        </ul>
        </div>
    </div>
    
</div>

            
            <div id="content" class="markdown-body">
                <div class="margin-for-toc"><!--
 - Licensed to the Apache Software Foundation (ASF) under one or more
 - contributor license agreements.  See the NOTICE file distributed with
 - this work for additional information regarding copyright ownership.
 - The ASF licenses this file to You under the Apache License, Version 2.0
 - (the "License"); you may not use this file except in compliance with
 - the License.  You may obtain a copy of the License at
 -
 -   http://www.apache.org/licenses/LICENSE-2.0
 -
 - Unless required by applicable law or agreed to in writing, software
 - distributed under the License is distributed on an "AS IS" BASIS,
 - WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 - See the License for the specific language governing permissions and
 - limitations under the License.
 -->
<h1 id="trino">Trino</h1>
<h2 id="iceberg-format">Iceberg format</h2>
<p>Iceberg format can be accessed using the Iceberg Connector provided by Trino.
please refer to the documentation at <a href="https://trino.io/docs/current/connector/iceberg.html#">Iceberg Trino user manual</a> for more information.</p>
<h2 id="paimon-format">Paimon format</h2>
<p>Paimon format can be accessed using the Paimon Connector provided by Trino.
please refer to the documentation at <a href="https://paimon.apache.org/docs/master/engines/trino/">Paimon Trino user manual</a> for more information.</p>
<h2 id="mixed-format">Mixed format</h2>
<h3 id="install">Install</h3>
<ul>
<li>Create the {trino_home}/plugin/amoro directory in the Trino installation package,
and extract the contents of the amoro-trino package amoro-mixed-trino-xx.tar.gz to the {trino_home}/plugin/amoro directory.</li>
<li>Configure the Catalog configuration file for Amoro in the {trino_home}/etc/catalog directory, for example:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tex" data-lang="tex"><span style="display:flex;"><span>connector.name=mixed-format
</span></span><span style="display:flex;"><span>amoro.url=thrift://{ip}:{port}/{catalogName}
</span></span></code></pre></div><ul>
<li>Configure the JVM configuration file for Trino in the {trino_home}/etc directory named <code>jvm.config</code> :</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tex" data-lang="tex"><span style="display:flex;"><span>--add-exports=java.security.jgss/sun.security.krb5=ALL-UNNAMED
</span></span></code></pre></div><h3 id="support-sql-statement">Support SQL statement</h3>
<h4 id="query-table">Query Table</h4>
<p>By adopting the Merge-On-Read approach to read Mixed Format, the latest data of the table can be read, for example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> <span style="color:#e6db74">&#34;{TABLE_NAME}&#34;</span>
</span></span></code></pre></div><h4 id="query-basestore-of-table">Query BaseStore of Table</h4>
<p>Directly querying the BaseStore in a table with a primary key is supported. The BaseStore stores the stock data of the table, which is usually generated by batch job or optimization.
The queried data is static, and the query efficiency is very high, but the timeliness is not good. The syntax is as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> <span style="color:#e6db74">&#34;{TABLE_NAME}#BASE&#34;</span>
</span></span></code></pre></div><h4 id="query-changestore-of-table">Query ChangeStore of Table</h4>
<p>Directly querying the ChangeStore in a table with a primary key is supported. The ChangeStore stores the stream and change data of the table, which is usually written in real time by stream job.
The change records of the table can be queried through the ChangeStore, and the expiry time of the data in the ChangeStore determines how long ago the change records can be queried.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> <span style="color:#e6db74">&#34;{TABLE_NAME}#CHANGE&#34;</span>
</span></span></code></pre></div><p>Three additional columns will be included in the query result, which are:</p>
<ul>
<li>_transaction_id: The transaction ID allocated by AMS when the data is written. In batch mode, it is allocated for each SQL execution, and in stream mode, it is allocated for each checkpoint.</li>
<li>_file_offsetï¼šIndicates the order in which the data was written in the same batch of _transaction_id.</li>
<li>_change_actionï¼šIndicates the type of data, which can be either INSERT or DELETE.</li>
</ul>
<h4 id="trino-and-amoro-type-mapping">Trino and Amoro Type Mapping:</h4>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Amoro type</th>
          <th style="text-align: left">Trino type</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>BOOLEAN</code></td>
          <td style="text-align: left"><code>BOOLEAN</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>INT</code></td>
          <td style="text-align: left"><code>INTEGER</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>LONG</code></td>
          <td style="text-align: left"><code>BIGINT</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>FLOAT</code></td>
          <td style="text-align: left"><code>REAL</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>DOUBLE</code></td>
          <td style="text-align: left"><code>DOUBLE</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>DECIMAL(p,s)</code></td>
          <td style="text-align: left"><code>DECIMAL(p,s)</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>DATE</code></td>
          <td style="text-align: left"><code>DATE</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>TIME</code></td>
          <td style="text-align: left"><code>TIME(6)</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>TIMESTAMP</code></td>
          <td style="text-align: left"><code>TIMESTAMP(6)</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>TIMESTAMPTZ</code></td>
          <td style="text-align: left"><code>TIMESTAMP(6) WITH TIME ZONE</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>STRING</code></td>
          <td style="text-align: left"><code>VARCHAR</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>UUID</code></td>
          <td style="text-align: left"><code>UUID</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>BINARY</code></td>
          <td style="text-align: left"><code>VARBINARY</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>STRUCT(...)</code></td>
          <td style="text-align: left"><code>ROW(...)</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>LIST(e)</code></td>
          <td style="text-align: left"><code>ARRAY(e)</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>MAP(k,v)</code></td>
          <td style="text-align: left"><code>MAP(k,v)</code></td>
      </tr>
  </tbody>
</table>
<h3 id="trino-uses-proxy-user-to-access-hadoop-cluster">Trino uses proxy user to access Hadoop cluster.</h3>
<p>By default, when Trino queries Amoro, it uses the Hadoop user configured in the <a href="../managing-catalogs/#create-catalog">catalog creation</a> to access the Hadoop cluster.
To use Trino&rsquo;s user to access the Hadoop cluster, you need enable Hadoop impersonation by adding the mixed-format.hdfs.impersonation.enabled=true parameter in the Amoro catalog configuration file located in the {trino_home}/etc/catalog directory, as follows.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tex" data-lang="tex"><span style="display:flex;"><span>connector.name=mixed-format
</span></span><span style="display:flex;"><span>amoro.url=thrift://{ip}:{port}/{catalogName}
</span></span><span style="display:flex;"><span>mixed-format.hdfs.impersonation.enabled=true
</span></span></code></pre></div><p><code>mixed-format.hdfs.impersonation.enabled</code> default false</p>
<div class="info">
    To use Hadoop impersonation, you need to enable the proxy feature for the Hadoop user configured in the <a href="../managing-catalogs/#create-catalog">catalog creation</a> in the Hadoop cluster beforehandï¼Œ
and make sure that it can proxy the Trino querying user. Please refer to <a href="https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/Superusers.html#Configurations">Hadoop Proxy User</a> for more information.
</div>
</div>
                
                    














<div id="toc" class="markdown-body">
    <div id="full">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#iceberg-format">Iceberg format</a></li>
    <li><a href="#paimon-format">Paimon format</a></li>
    <li><a href="#mixed-format">Mixed format</a>
      <ul>
        <li><a href="#install">Install</a></li>
        <li><a href="#support-sql-statement">Support SQL statement</a></li>
        <li><a href="#trino-uses-proxy-user-to-access-hadoop-cluster">Trino uses proxy user to access Hadoop cluster.</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
            </div>
        </div>
    </section>
</body>















<script src="https://amoro.apache.org/docs/version_bump_when_releasing//js/jquery-1.11.0.js"></script>


<script src="https://amoro.apache.org/docs/version_bump_when_releasing//js/jquery.easing.min.js"></script>


<script type="text/javascript" src="https://amoro.apache.org/docs/version_bump_when_releasing//js/search.js"></script>


<script src="https://amoro.apache.org/docs/version_bump_when_releasing//js/bootstrap.min.js"></script>


<script src="https://amoro.apache.org/docs/version_bump_when_releasing//js/iceberg-theme.js"></script>



</html>